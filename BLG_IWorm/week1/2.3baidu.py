from http import cookies
import requests

url = 'http://www.baidu.com/s'
keywords = 'python'
headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36 Edg/100.0.1185.29'}
cookies = {
    'Cookie':'__yjs_duid=1_3f7181625dd7c52e0ec893340367d0d21620181689499; BDUSS=jhnWkcxM3gtdDA4clAyQk83dmN2elFSb2VLN1o5bER6U1NCMVJwSHdLbjRQM3RoRVFBQUFBJCQAAAAAAAAAAAEAAAC2EDoQYnl3ZGYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPiyU2H4slNha; BDUSS_BFESS=jhnWkcxM3gtdDA4clAyQk83dmN2elFSb2VLN1o5bER6U1NCMVJwSHdLbjRQM3RoRVFBQUFBJCQAAAAAAAAAAAEAAAC2EDoQYnl3ZGYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPiyU2H4slNha; PSTM=1585543363; BIDUPSID=CEFCE574BB37E01E6E2426854AF4A15A; MCITY=-234:; BAIDUID=000576318AA429F647A4FFAF2E05E772:SL=0:NR=10:FG=1; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; BDSFRCVID_BFESS=py_OJeC6268RTfoDsiswuaoVqVQCuSbTH6f300EnI10C4Sfq4yKcEG0P5U8g0KAMW1noogKKymOTHr4F_2uxOjjg8UtVJeC6EG0Ptf8g0f5; H_BDCLCKID_SF_BFESS=tb-DVItXJD_3jbbTq47q-44QqxbXqbO8X2OZ0l8KtDLWVxbIhUO5MJtW5fQyLJopLm7tbbomWIQthItxQtTzDj8djbbhb638WK74KKJxJxKWeIJoLfcRDtCehUJiBbcLBan7QDbIXKohJh7FM4tW3J0ZyxomtfQxtNRJ0DnjtnLhbRO4-TFWDT5b3j; delPer=0; PSINO=2; BAIDUID_BFESS=000576318AA429F647A4FFAF2E05E772:SL=0:NR=10:FG=1; ZD_ENTRY=baidu; ab_sr=1.0.1_N2Q2OTU1YjMxMjNkODU1YTEzOWJlNjE1YThhMjY3ZTE5NWQxN2Y0YmY1MDFmY2RlMzdkZTEwNjQwYzQwMTA4YTBiMTMwOTIxMDkyNWU3MDJkYTIzOWY0NjVhMmYxNDBmODViM2IzZTNjNWU1MzYwMDllZDJjNDI5NTA1YzNmNDUyMjY0MWFlMjRlMzU3NmJlMjZjMjc3ZjlkMzM2MTA0NGJiOTdkYTg1OGRjZGNjMDBmYjQ2YjdhN2I3MWJjZmNj; BA_HECTOR=0l2l8h8l2kahagagon1h4ndd50q; H_PS_PSSID=31253_34812_35915_36166_34584_36141_36121_36075_36126_36232_26350_36112_35869_36101_36061'
}
try:
    kv = {'wd': keywords}
    r = requests.get(url, timeout=30, params=kv, headers=headers, cookies = cookies)
    print(r.request.url)
    r.raise_for_status()
    r.encoding = 'utf-8'
    print(len(r.text))
except:
    print('Error')